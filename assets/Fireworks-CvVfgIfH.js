var x=Object.defineProperty;var F=(r,i,d)=>i in r?x(r,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[i]=d;var s=(r,i,d)=>F(r,typeof i!="symbol"?i+"":i,d);import{a as T,u as z,r as P,k as B,o as I,b as S,g as $,h as A,f as R,j as q,_ as E}from"./index-fOcTTIOS.js";const N={key:0,class:"fireworks-container"},L=T({__name:"Fireworks",props:{show:{type:Boolean,default:!1},duration:{type:Number,default:5e3}},setup(r){const i=r,d=z(),h=P(null);let u=null,n=null,f=[],l=[],p=null,m=120;class k{constructor(e,a,c){s(this,"x");s(this,"y");s(this,"speed");s(this,"velocity");s(this,"size");s(this,"alpha");s(this,"shrink");s(this,"hue");s(this,"brightness");this.x=e,this.y=a,this.speed=2+Math.random()*3;const o=Math.random()*Math.PI*2;this.velocity={x:Math.cos(o)*this.speed,y:Math.sin(o)*this.speed},this.size=1+Math.random()*2,this.alpha=1,this.shrink=.96,this.hue=c+Math.random()*50-25,this.brightness=50+Math.random()*30}update(){return this.x+=this.velocity.x,this.y+=this.velocity.y,this.velocity.y+=.05,this.size*=this.shrink,this.alpha-=.01,this.alpha>.05&&this.size>.3}draw(e){e.globalAlpha=this.alpha,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fillStyle=`hsla(${this.hue}, 100%, ${this.brightness}%, ${this.alpha})`,e.fill(),e.globalAlpha=1}}class b{constructor(e,a,c,o,C){s(this,"x");s(this,"y");s(this,"startX");s(this,"startY");s(this,"targetX");s(this,"targetY");s(this,"distanceToTarget");s(this,"traveled");s(this,"angle");s(this,"speed");s(this,"acceleration");s(this,"brightness");s(this,"hue");this.x=e,this.y=a,this.startX=e,this.startY=a,this.targetX=c,this.targetY=o,this.distanceToTarget=Math.sqrt(Math.pow(c-e,2)+Math.pow(o-a,2)),this.traveled=0,this.angle=Math.atan2(o-a,c-e),this.speed=5,this.acceleration=1.05,this.brightness=50+Math.random()*30,this.hue=C}update(){return this.traveled=Math.sqrt(Math.pow(this.x-this.startX,2)+Math.pow(this.y-this.startY,2)),this.traveled>=this.distanceToTarget?!1:(this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed,this.speed*=this.acceleration,!0)}draw(e){e.beginPath(),e.arc(this.x,this.y,2,0,Math.PI*2),e.closePath(),e.fillStyle=`hsl(${this.hue}, 100%, ${this.brightness}%)`,e.fill()}explode(){const e=50+Math.round(Math.random()*30);for(let a=0;a<e;a++)f.push(new k(this.x,this.y,this.hue))}}const _=()=>{if(!h.value)return;const t=h.value,{width:e,height:a}=t.getBoundingClientRect();t.width=e,t.height=a,n=t.getContext("2d"),n&&(n.globalCompositeOperation="source-over")},w=()=>{if(!h.value)return;const t=h.value,{width:e,height:a}=t.getBoundingClientRect();t.width=e,t.height=a},v=()=>{if(!(!n||!h.value)){n.fillStyle=d.isDarkMode?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)",n.fillRect(0,0,h.value.width,h.value.height),f=f.filter(t=>t.update()?(t.draw(n),!0):!1);for(let t=l.length-1;t>=0;t--)l[t].update()?l[t].draw(n):(l[t].explode(),l.splice(t,1));Math.random()<.05&&M(),m+=.5,u=requestAnimationFrame(v)}},M=()=>{if(!h.value)return;const t=h.value,e=Math.random()*t.width,a=t.height,c=Math.random()*t.width,o=Math.random()*(t.height*.6);l.push(new b(e,a,c,o,m))},y=()=>{if(h.value){_();for(let t=0;t<3;t++)M();v(),i.duration>0&&(p=setTimeout(()=>{g()},i.duration))}},g=()=>{u&&(cancelAnimationFrame(u),u=null),p&&(clearTimeout(p),p=null),f=[],l=[]};return B(()=>i.show,t=>{t?y():g()},{immediate:!0}),I(()=>{window.addEventListener("resize",w),i.show&&y()}),S(()=>{window.removeEventListener("resize",w),g()}),(t,e)=>r.show?(R(),$("div",N,[q("canvas",{ref_key:"fireworksCanvas",ref:h,class:"fireworks-canvas"},null,512)])):A("",!0)}}),Y=E(L,[["__scopeId","data-v-0ba52a07"]]);export{Y as default};
